{"version":3,"names":["runOnJS","useAnimatedReaction","computedOffsetXValueWithAutoFillData","useOnProgressChange","opts","autoFillData","loop","offsetX","size","rawDataLength","onProgressChange","value","_value","Math","max","min","absoluteProgress","abs"],"sources":["useOnProgressChange.ts"],"sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n} from \"react-native-reanimated\";\n\nimport type { TCarouselProps } from \"../types\";\nimport { computedOffsetXValueWithAutoFillData } from \"../utils/computedWithAutoFillData\";\n\nexport function useOnProgressChange(\n  opts: {\n    size: number\n    autoFillData: boolean\n    loop: boolean\n    offsetX: Animated.SharedValue<number>\n    rawDataLength: number\n  } & Pick<TCarouselProps, \"onProgressChange\">,\n) {\n  const { autoFillData, loop, offsetX, size, rawDataLength, onProgressChange }\n        = opts;\n\n  useAnimatedReaction(\n    () => offsetX.value,\n    (_value) => {\n      let value = computedOffsetXValueWithAutoFillData({\n        value: _value,\n        rawDataLength,\n        size,\n        autoFillData,\n        loop,\n      });\n\n      if (!loop) {\n        value = Math.max(\n          -((rawDataLength - 1) * size),\n          Math.min(value, 0),\n        );\n      }\n\n      let absoluteProgress = Math.abs(value / size);\n\n      if (value > 0)\n        absoluteProgress = rawDataLength - absoluteProgress;\n\n      if (onProgressChange)\n        runOnJS(onProgressChange)(value, absoluteProgress);\n    },\n    [loop, autoFillData, rawDataLength, onProgressChange],\n  );\n}\n"],"mappings":"AACA,SACEA,OAAO,EACPC,mBAAmB,QACd,yBAAyB;AAGhC,SAASC,oCAAoC,QAAQ,mCAAmC;AAExF,OAAO,SAASC,mBAAmBA,CACjCC,IAM4C,EAC5C;EACA,MAAM;IAAEC,YAAY;IAAEC,IAAI;IAAEC,OAAO;IAAEC,IAAI;IAAEC,aAAa;IAAEC;EAAiB,CAAC,GACpEN,IAAI;EAEZH,mBAAmB,CACjB,MAAMM,OAAO,CAACI,KAAK,EAClBC,MAAM,IAAK;IACV,IAAID,KAAK,GAAGT,oCAAoC,CAAC;MAC/CS,KAAK,EAAEC,MAAM;MACbH,aAAa;MACbD,IAAI;MACJH,YAAY;MACZC;IACF,CAAC,CAAC;IAEF,IAAI,CAACA,IAAI,EAAE;MACTK,KAAK,GAAGE,IAAI,CAACC,GAAG,CACd,EAAE,CAACL,aAAa,GAAG,CAAC,IAAID,IAAI,CAAC,EAC7BK,IAAI,CAACE,GAAG,CAACJ,KAAK,EAAE,CAAC,CAAC,CACnB;IACH;IAEA,IAAIK,gBAAgB,GAAGH,IAAI,CAACI,GAAG,CAACN,KAAK,GAAGH,IAAI,CAAC;IAE7C,IAAIG,KAAK,GAAG,CAAC,EACXK,gBAAgB,GAAGP,aAAa,GAAGO,gBAAgB;IAErD,IAAIN,gBAAgB,EAClBV,OAAO,CAACU,gBAAgB,CAAC,CAACC,KAAK,EAAEK,gBAAgB,CAAC;EACtD,CAAC,EACD,CAACV,IAAI,EAAED,YAAY,EAAEI,aAAa,EAAEC,gBAAgB,CAAC,CACtD;AACH"}