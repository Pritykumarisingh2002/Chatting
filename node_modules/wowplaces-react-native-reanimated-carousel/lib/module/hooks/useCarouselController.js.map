{"version":3,"names":["React","useRef","runOnJS","useAnimatedReaction","useSharedValue","Easing","computedRealIndexWithAutoFillData","convertToSharedIndex","dealWithAnimation","handlerOffsetDirection","round","useCarouselController","options","size","loop","dataLength","handlerOffset","withAnimation","defaultIndex","duration","autoFillData","dataInfo","useMemo","length","disable","originalLength","index","sharedIndex","sharedPreIndex","currentFixedPage","useCallback","Math","value","fixed","abs","setSharedIndex","newSharedIndex","current","handlerOffsetValue","toInt","isPositive","i","newSharedIndexValue","rawDataLength","_ref","getCurrentIndex","realIndex","canSliding","onScrollEnd","_options$onScrollEnd","call","onScrollBegin","_options$onScrollBegi","scrollWithTiming","toValue","onFinished","callback","isFinished","defaultWithAnimation","type","config","easing","easeOutQuart","next","opts","arguments","undefined","count","animated","nextPage","prev","prevPage","to","direction","offset","totalSize","isCloseToNextLoop","finalOffset","floor","scrollTo","n","getSharedIndex"],"sources":["useCarouselController.tsx"],"sourcesContent":["import React, { useRef } from \"react\";\nimport type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n  useSharedValue,\n} from \"react-native-reanimated\";\n\nimport { Easing } from \"../constants\";\nimport type {\n  TCarouselActionOptions,\n  TCarouselProps,\n  WithTimingAnimation,\n} from \"../types\";\nimport { computedRealIndexWithAutoFillData, convertToSharedIndex } from \"../utils/computedWithAutoFillData\";\nimport { dealWithAnimation } from \"../utils/dealWithAnimation\";\nimport { handlerOffsetDirection } from \"../utils/handlerOffsetDirection\";\nimport { round } from \"../utils/log\";\n\ninterface IOpts {\n  loop: boolean\n  size: number\n  dataLength: number\n  autoFillData: TCarouselProps[\"autoFillData\"]\n  handlerOffset: Animated.SharedValue<number>\n  withAnimation?: TCarouselProps[\"withAnimation\"]\n  duration?: number\n  defaultIndex?: number\n  onScrollBegin?: () => void\n  onScrollEnd?: () => void\n}\n\nexport interface ICarouselController {\n  getSharedIndex: () => number\n  prev: (opts?: TCarouselActionOptions) => void\n  next: (opts?: TCarouselActionOptions) => void\n  getCurrentIndex: () => number\n  scrollTo: (opts?: TCarouselActionOptions) => void\n}\n\nexport function useCarouselController(options: IOpts): ICarouselController {\n  const {\n    size,\n    loop,\n    dataLength,\n    handlerOffset,\n    withAnimation,\n    defaultIndex = 0,\n    duration,\n    autoFillData,\n  } = options;\n\n  const dataInfo = React.useMemo(\n    () => ({\n      length: dataLength,\n      disable: !dataLength,\n      originalLength: dataLength,\n    }),\n    [dataLength],\n  );\n\n  const index = useSharedValue<number>(defaultIndex);\n  // The Index displayed to the user\n  const sharedIndex = useRef<number>(defaultIndex);\n  const sharedPreIndex = useRef<number>(defaultIndex);\n\n  const currentFixedPage = React.useCallback(() => {\n    if (loop)\n      return -Math.round(handlerOffset.value / size);\n\n    const fixed = (handlerOffset.value / size) % dataInfo.length;\n    return Math.round(\n      handlerOffset.value <= 0\n        ? Math.abs(fixed)\n        : Math.abs(fixed > 0 ? dataInfo.length - fixed : 0),\n    );\n  }, [handlerOffset, dataInfo, size, loop]);\n\n  function setSharedIndex(newSharedIndex: number) {\n    sharedIndex.current = newSharedIndex;\n  }\n\n  useAnimatedReaction(\n    () => {\n      const handlerOffsetValue = handlerOffset.value;\n      const toInt = round(handlerOffsetValue / size) % dataInfo.length;\n      const isPositive = handlerOffsetValue <= 0;\n      const i = isPositive\n        ? Math.abs(toInt)\n        : Math.abs(toInt > 0 ? dataInfo.length - toInt : 0);\n\n      const newSharedIndexValue = convertToSharedIndex({\n        loop,\n        rawDataLength: dataInfo.originalLength,\n        autoFillData: autoFillData!,\n        index: i,\n      });\n\n      return {\n        i,\n        newSharedIndexValue,\n      };\n    },\n    ({ i, newSharedIndexValue }) => {\n      index.value = i;\n      runOnJS(setSharedIndex)(newSharedIndexValue);\n    },\n    [\n      sharedPreIndex,\n      sharedIndex,\n      size,\n      dataInfo,\n      index,\n      loop,\n      autoFillData,\n      handlerOffset,\n    ],\n  );\n\n  const getCurrentIndex = React.useCallback(() => {\n    const realIndex = computedRealIndexWithAutoFillData({\n      index: index.value,\n      dataLength: dataInfo.originalLength,\n      loop,\n      autoFillData: autoFillData!,\n    });\n\n    return realIndex;\n  }, [index, autoFillData, dataInfo, loop]);\n\n  const canSliding = React.useCallback(() => {\n    return !dataInfo.disable;\n  }, [dataInfo]);\n\n  const onScrollEnd = React.useCallback(() => {\n    options.onScrollEnd?.();\n  }, [options]);\n\n  const onScrollBegin = React.useCallback(() => {\n    options.onScrollBegin?.();\n  }, [options]);\n\n  const scrollWithTiming = React.useCallback(\n    (toValue: number, onFinished?: () => void) => {\n      \"worklet\";\n      const callback = (isFinished: boolean) => {\n        \"worklet\";\n        if (isFinished) {\n          runOnJS(onScrollEnd)();\n          onFinished && runOnJS(onFinished)();\n        }\n      };\n\n      const defaultWithAnimation: WithTimingAnimation = {\n        type: \"timing\",\n        config: { duration, easing: Easing.easeOutQuart },\n      };\n\n      return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n        toValue,\n        callback,\n      );\n    },\n    [duration, withAnimation, onScrollEnd],\n  );\n\n  const next = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      \"worklet\";\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value >= dataInfo.length - 1))\n        return;\n\n      onScrollBegin?.();\n\n      const nextPage = currentFixedPage() + count;\n      index.value = nextPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -nextPage * size,\n          onFinished,\n        ) as any;\n      }\n      else {\n        handlerOffset.value = -nextPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      dataInfo,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const prev = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value <= 0)) return;\n\n      onScrollBegin?.();\n\n      const prevPage = currentFixedPage() - count;\n      index.value = prevPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -prevPage * size,\n          onFinished,\n        );\n      }\n      else {\n        handlerOffset.value = -prevPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const to = React.useCallback(\n    (opts: { i: number; animated: boolean; onFinished?: () => void }) => {\n      const { i, animated = false, onFinished } = opts;\n      if (i === index.value) return;\n      if (!canSliding()) return;\n\n      onScrollBegin?.();\n      // direction -> 1 | -1\n      const direction = handlerOffsetDirection(handlerOffset);\n\n      // target offset\n      const offset = i * size * direction;\n      // page width size * page count\n      const totalSize = dataInfo.length * size;\n\n      let isCloseToNextLoop = false;\n\n      if (loop) {\n        isCloseToNextLoop\n                    = Math.abs(handlerOffset.value % totalSize) / totalSize\n                    >= 0.5;\n      }\n\n      const finalOffset\n                = (Math.floor(Math.abs(handlerOffset.value / totalSize))\n                    + (isCloseToNextLoop ? 1 : 0))\n                    * totalSize\n                    * direction\n                + offset;\n\n      if (animated) {\n        index.value = i;\n        handlerOffset.value = scrollWithTiming(finalOffset, onFinished);\n      }\n      else {\n        handlerOffset.value = finalOffset;\n        index.value = i;\n        onFinished?.();\n      }\n    },\n    [\n      index,\n      canSliding,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      dataInfo.length,\n      loop,\n      scrollWithTiming,\n    ],\n  );\n\n  const scrollTo = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { index: i, count, animated = false, onFinished } = opts;\n      if (typeof i === \"number\" && i > -1) {\n        to({ i, animated, onFinished });\n        return;\n      }\n\n      if (!count)\n        return;\n\n      const n = Math.round(count);\n\n      if (n < 0)\n        prev({ count: Math.abs(n), animated, onFinished });\n\n      else\n        next({ count: n, animated, onFinished });\n    },\n    [prev, next, to],\n  );\n\n  return {\n    next,\n    prev,\n    scrollTo,\n    getCurrentIndex,\n    getSharedIndex: () => sharedIndex.current,\n  };\n}\n"],"mappings":"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"}