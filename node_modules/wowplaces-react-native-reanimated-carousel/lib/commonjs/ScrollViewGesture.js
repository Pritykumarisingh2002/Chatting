var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ScrollViewGesture=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=_interopRequireDefault(require("react"));var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _constants=require("./constants");var _store=require("./store");var _dealWithAnimation=require("./utils/dealWithAnimation");var _this=this,_jsxFileName="/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_10100718122216_init_data={code:"function anonymous() {\n  const {\n    vertical\n  } = this._closure;\n  return !vertical;\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"vertical\",\"_closure\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAsEuC,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAO,CAAAD,QAAA;AAAA\"}"};var _worklet_11702000154001_init_data={code:"function anonymous() {\n  const {\n    infinite,\n    overscrollEnabled,\n    measure,\n    containerRef,\n    dataLength,\n    size,\n    marginOffset\n  } = this._closure;\n  if (!infinite && !overscrollEnabled) {\n    const {\n      width: containerWidth = 0\n    } = measure(containerRef);\n    if (dataLength * size < containerWidth) return 0;\n    return dataLength * size - containerWidth + marginOffset;\n  }\n  return dataLength * size;\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"infinite\",\"overscrollEnabled\",\"measure\",\"containerRef\",\"dataLength\",\"size\",\"marginOffset\",\"_closure\",\"width\",\"containerWidth\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA6EqC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC,OAAA;IAAAC,YAAA;IAAAC,UAAA;IAAAC,IAAA;IAAAC;EAAA,SAAAC,QAAA;EAGvC,IAAI,CAACP,QAAQ,IAAI,CAACC,iBAAiB,EAAE;IACnC,MAAM;MAAEO,KAAK,EAAEC,cAAc,GAAG;IAAE,CAAC,GAAGP,OAAO,CAACC,YAAY,CAAC;IAG3D,IAAIC,UAAU,GAAGC,IAAI,GAAGI,cAAc,EACpC,OAAO,CAAC;IAGV,OAAOL,UAAU,GAAGC,IAAI,GAAGI,cAAc,GAAGH,YAAY;EAC1D;EAEA,OAAOF,UAAU,GAAGC,IAAI;AAC1B\"}"};var _worklet_38454346678_init_data={code:"function anonymous(toValue, onFinished) {\n  const {\n    scrollAnimationDuration,\n    Easing,\n    dealWithAnimation,\n    withAnimation,\n    runOnJS\n  } = this._closure;\n  var _withAnimation;\n  const defaultWithAnimation = {\n    type: \"timing\",\n    config: {\n      duration: scrollAnimationDuration + 100,\n      easing: Easing.easeOutQuart\n    }\n  };\n  return dealWithAnimation((_withAnimation = withAnimation) !== null && _withAnimation !== void 0 ? _withAnimation : defaultWithAnimation)(toValue, function (isFinished) {\n    \"worklet\";\n\n    if (isFinished) onFinished && runOnJS(onFinished)();\n  });\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"toValue\",\"onFinished\",\"scrollAnimationDuration\",\"Easing\",\"dealWithAnimation\",\"withAnimation\",\"runOnJS\",\"_closure\",\"_withAnimation\",\"defaultWithAnimation\",\"type\",\"config\",\"duration\",\"easing\",\"easeOutQuart\",\"isFinished\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA+FI,SAACA,SAAeA,CAAAC,OAAE,EAAAC,UAA4B;EAAA;IAAAC,uBAAA;IAAAC,MAAA;IAAAC,iBAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,cAAA;EAE5C,MAAMC,oBAAyC,GAAG;IAChDC,IAAI,EAAE,QAAQ;IACdC,MAAM,EAAE;MACNC,QAAQ,EAAEV,uBAAuB,GAAG,GAAG;MACvCW,MAAM,EAAEV,MAAM,CAACW;IACjB;EACF,CAAC;EAED,OAAOV,iBAAiB,EAAAI,cAAA,GAACH,aAAa,cAAAG,cAAA,cAAAA,cAAA,GAAIC,oBAAoB,CAAC,CAC7DT,OAAO,EACP,UAACe,UAAmB,EAAK;IACvB,SAAS;;IACT,IAAIA,UAAU,EACZd,UAAU,IAAIK,OAAO,CAACL,UAAU,CAAC,EAAE;EACvC,CAAC,CACF;AACH\"}"};var _worklet_15664499378840_init_data={code:"function anonymous(isFinished) {\n  const {\n    onFinished,\n    runOnJS\n  } = this._closure;\n  if (isFinished) onFinished && runOnJS(onFinished)();\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"onFinished\",\"runOnJS\",\"_closure\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA2GQ,SAACA,UAAAC,UAAwB;EAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EAEvB,IAAIH,UAAU,EACZC,UAAU,IAAIC,OAAO,CAACD,UAAU,CAAC,EAAE;AACvC\"}"};var _worklet_10010809513317_init_data={code:"function anonymous(onFinished) {\n  const {\n    translation,\n    scrollEndVelocity,\n    withDecay,\n    pagingEnabled,\n    scrollEndTranslation,\n    size,\n    infinite,\n    withSpring,\n    maxPage,\n    snapEnabled,\n    overscrollEnabled,\n    getLimit\n  } = this._closure;\n  const origin = translation.value;\n  const velocity = scrollEndVelocity.value;\n  let finalTranslation = withDecay({\n    velocity: velocity,\n    deceleration: 0.999\n  });\n  if (pagingEnabled) {\n    const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1);\n    const computed = offset < 0 ? Math.ceil : Math.floor;\n    const page = computed(-translation.value / size);\n    if (infinite) {\n      const finalPage = page + offset;\n      finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n    } else {\n      const finalPage = Math.min(maxPage - 1, Math.max(0, page + offset));\n      finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n    }\n  }\n  if (!pagingEnabled && snapEnabled) {\n    const nextPage = Math.round((origin + velocity * 0.4) / size) * size;\n    finalTranslation = withSpring(withProcessTranslation(nextPage), onFinished);\n  }\n  translation.value = finalTranslation;\n  function withProcessTranslation(translation) {\n    if (!infinite && !overscrollEnabled) {\n      const limit = getLimit();\n      const sign = Math.sign(translation);\n      return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n    }\n    return translation;\n  }\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"onFinished\",\"translation\",\"scrollEndVelocity\",\"withDecay\",\"pagingEnabled\",\"scrollEndTranslation\",\"size\",\"infinite\",\"withSpring\",\"maxPage\",\"snapEnabled\",\"overscrollEnabled\",\"getLimit\",\"_closure\",\"origin\",\"value\",\"velocity\",\"finalTranslation\",\"deceleration\",\"offset\",\"computed\",\"Math\",\"ceil\",\"floor\",\"page\",\"finalPage\",\"withProcessTranslation\",\"min\",\"max\",\"nextPage\",\"round\",\"limit\",\"sign\",\"abs\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAsHI,SAACA,UAAAC,UAA4B;EAAA;IAAAC,WAAA;IAAAC,iBAAA;IAAAC,SAAA;IAAAC,aAAA;IAAAC,oBAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,UAAA;IAAAC,OAAA;IAAAC,WAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAE3B,MAAMC,MAAM,GAAGb,WAAW,CAACc,KAAK;EAChC,MAAMC,QAAQ,GAAGd,iBAAiB,CAACa,KAAK;EAExC,IAAIE,gBAAwB,GAAGd,SAAS,CAAC;IAAEa,QAAQ,EAARA,QAAQ;IAAEE,YAAY,EAAE;EAAM,CAAC,CAAC;EAS3E,IAAId,aAAa,EAAE;IAEjB,MAAMe,MAAM,GAAG,EAAEd,oBAAoB,CAACU,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAC1D,MAAMK,QAAQ,GAAGD,MAAM,GAAG,CAAC,GAAGE,IAAI,CAACC,IAAI,GAAGD,IAAI,CAACE,KAAK;IACpD,MAAMC,IAAI,GAAGJ,QAAQ,CAAC,CAACnB,WAAW,CAACc,KAAK,GAAGT,IAAI,CAAC;IAEhD,IAAIC,QAAQ,EAAE;MACZ,MAAMkB,SAAS,GAAGD,IAAI,GAAGL,MAAM;MAC/BF,gBAAgB,GAAGT,UAAU,CAACkB,sBAAsB,CAAC,CAACD,SAAS,GAAGnB,IAAI,CAAC,EAAEN,UAAU,CAAC;IACtF,CAAC,MACI;MACH,MAAMyB,SAAS,GAAGJ,IAAI,CAACM,GAAG,CAAClB,OAAO,GAAG,CAAC,EAAEY,IAAI,CAACO,GAAG,CAAC,CAAC,EAAEJ,IAAI,GAAGL,MAAM,CAAC,CAAC;MACnEF,gBAAgB,GAAGT,UAAU,CAACkB,sBAAsB,CAAC,CAACD,SAAS,GAAGnB,IAAI,CAAC,EAAEN,UAAU,CAAC;IACtF;EACF;EAEA,IAAI,CAACI,aAAa,IAAIM,WAAW,EAAE;IAEjC,MAAMmB,QAAQ,GAAGR,IAAI,CAACS,KAAK,CAAC,CAAChB,MAAM,GAAGE,QAAQ,GAAG,GAAG,IAAIV,IAAI,CAAC,GAAGA,IAAI;IACpEW,gBAAgB,GAAGT,UAAU,CAACkB,sBAAsB,CAACG,QAAQ,CAAC,EAAE7B,UAAU,CAAC;EAC7E;EAEAC,WAAW,CAACc,KAAK,GAAGE,gBAAgB;EAEpC,SAASS,sBAAsBA,CAACzB,WAAmB,EAAE;IACnD,IAAI,CAACM,QAAQ,IAAI,CAACI,iBAAiB,EAAE;MACnC,MAAMoB,KAAK,GAAGnB,QAAQ,EAAE;MACxB,MAAMoB,IAAI,GAAGX,IAAI,CAACW,IAAI,CAAC/B,WAAW,CAAC;MACnC,OAAO+B,IAAI,GAAGX,IAAI,CAACO,GAAG,CAAC,CAAC,EAAEP,IAAI,CAACM,GAAG,CAACI,KAAK,EAAEV,IAAI,CAACY,GAAG,CAAChC,WAAW,CAAC,CAAC,CAAC;IACnE;IAEA,OAAOA,WAAW;EACpB;AACF\"}"};var _worklet_14734469187996_init_data={code:"function anonymous(isFinished) {\n  const {\n    touching,\n    onScrollEnd,\n    runOnJS\n  } = this._closure;\n  if (isFinished) {\n    touching.value = false;\n    onScrollEnd && runOnJS(onScrollEnd)();\n  }\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"touching\",\"onScrollEnd\",\"runOnJS\",\"_closure\",\"value\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAoLI,SAACA,UAAAC,UAAwB;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAEvB,IAAIJ,UAAU,EAAE;IACdC,QAAQ,CAACI,KAAK,GAAG,KAAK;IACtBH,WAAW,IAAIC,OAAO,CAACD,WAAW,CAAC,EAAE;EACvC;AACF\"}"};var _worklet_14660770182194_init_data={code:"function anonymous() {\n  const {\n    touching,\n    translation,\n    withDecay,\n    scrollEndVelocity,\n    onFinish\n  } = this._closure;\n  touching.value = true;\n  translation.value = withDecay({\n    velocity: scrollEndVelocity.value\n  }, function (isFinished) {\n    return onFinish(isFinished);\n  });\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"touching\",\"translation\",\"withDecay\",\"scrollEndVelocity\",\"onFinish\",\"_closure\",\"value\",\"velocity\",\"isFinished\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA8LwC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC,SAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAE1CL,QAAQ,CAACM,KAAK,GAAG,IAAI;EACrBL,WAAW,CAACK,KAAK,GAAGJ,SAAS,CAC3B;IAAEK,QAAQ,EAAEJ,iBAAiB,CAACG;EAAM,CAAC,EACrC,UAAAE,UAAU;IAAA,OAAIJ,QAAQ,CAACI,UAAU,CAAY;EAAA,EAC9C;AACH\"}"};var _worklet_11301139675464_init_data={code:"function anonymous(isFinished) {\n  const {\n    onFinish\n  } = this._closure;\n  return onFinish(isFinished);\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"onFinish\",\"_closure\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAmMM,SAAAA,UAAAC,UAAU;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAID,QAAQ,CAACD,UAAU,CAAW;AAAA\"}"};var _worklet_5253258937186_init_data={code:"function anonymous() {\n  const {\n    touching,\n    translation,\n    scrollEndTranslation,\n    activeDecay,\n    infinite,\n    withSpring,\n    maxPage,\n    size\n  } = this._closure;\n  if (touching.value) return;\n  if (translation.value > 0) {\n    if (scrollEndTranslation.value < 0) {\n      activeDecay();\n      return;\n    }\n    if (!infinite) {\n      translation.value = withSpring(0);\n      return;\n    }\n  }\n  if (translation.value < -((maxPage - 1) * size)) {\n    if (scrollEndTranslation.value > 0) {\n      activeDecay();\n      return;\n    }\n    if (!infinite) translation.value = withSpring(-((maxPage - 1) * size));\n  }\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"touching\",\"translation\",\"scrollEndTranslation\",\"activeDecay\",\"infinite\",\"withSpring\",\"maxPage\",\"size\",\"_closure\",\"value\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAuM0C,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC,oBAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC,UAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EAE5C,IAAIR,QAAQ,CAACS,KAAK,EAChB;EAEF,IAAIR,WAAW,CAACQ,KAAK,GAAG,CAAC,EAAE;IACzB,IAAIP,oBAAoB,CAACO,KAAK,GAAG,CAAC,EAAE;MAClCN,WAAW,EAAE;MACb;IACF;IACA,IAAI,CAACC,QAAQ,EAAE;MACbH,WAAW,CAACQ,KAAK,GAAGJ,UAAU,CAAC,CAAC,CAAC;MACjC;IACF;EACF;EAEA,IAAIJ,WAAW,CAACQ,KAAK,GAAG,EAAE,CAACH,OAAO,GAAG,CAAC,IAAIC,IAAI,CAAC,EAAE;IAC/C,IAAIL,oBAAoB,CAACO,KAAK,GAAG,CAAC,EAAE;MAClCN,WAAW,EAAE;MACb;IACF;IACA,IAAI,CAACC,QAAQ,EACXH,WAAW,CAACQ,KAAK,GAAGJ,UAAU,CAAC,EAAE,CAACC,OAAO,GAAG,CAAC,IAAIC,IAAI,CAAC,CAAC;EAC3D;AACF\"}"};var _worklet_15931544841004_init_data={code:"function anonymous() {\n  const {\n    translation\n  } = this._closure;\n  return translation.value;\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"translation\",\"_closure\",\"value\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA2OI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,WAAY,CAAAE,KAAA;AAAA\"}"};var _worklet_12444593625099_init_data={code:"function anonymous() {\n  const {\n    pagingEnabled,\n    resetBoundary\n  } = this._closure;\n  if (!pagingEnabled) resetBoundary();\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"pagingEnabled\",\"resetBoundary\",\"_closure\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA4OI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EACJ,IAAI,CAACF,aAAa,EAChBC,aAAa,EAAE;AACnB\"}"};var _worklet_6283859030724_init_data={code:"function anonymous(_, ctx) {\n  const {\n    touching,\n    onScrollBegin,\n    runOnJS,\n    maxPage,\n    size,\n    infinite,\n    overscrollEnabled,\n    getLimit,\n    translation\n  } = this._closure;\n  touching.value = true;\n  ctx.validStart = true;\n  onScrollBegin && runOnJS(onScrollBegin)();\n  ctx.max = (maxPage - 1) * size;\n  if (!infinite && !overscrollEnabled) ctx.max = getLimit();\n  ctx.panOffset = translation.value;\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_\",\"ctx\",\"touching\",\"onScrollBegin\",\"runOnJS\",\"maxPage\",\"size\",\"infinite\",\"overscrollEnabled\",\"getLimit\",\"translation\",\"_closure\",\"value\",\"validStart\",\"max\",\"panOffset\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAwPe,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,QAAA;IAAAC,aAAA;IAAAC,OAAA;IAAAC,OAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EACnBT,QAAQ,CAACU,KAAK,GAAG,IAAI;EACrBX,GAAG,CAACY,UAAU,GAAG,IAAI;EACrBV,aAAa,IAAIC,OAAO,CAACD,aAAa,CAAC,EAAE;EAEzCF,GAAG,CAACa,GAAG,GAAG,CAACT,OAAO,GAAG,CAAC,IAAIC,IAAI;EAC9B,IAAI,CAACC,QAAQ,IAAI,CAACC,iBAAiB,EACjCP,GAAG,CAACa,GAAG,GAAGL,QAAQ,EAAE;EAEtBR,GAAG,CAACc,SAAS,GAAGL,WAAW,CAACE,KAAK;AACnC\"}"};var _worklet_7554112990742_init_data={code:"function anonymous(e, ctx) {\n  const {\n    cancelAnimation,\n    translation,\n    touching,\n    isHorizontal,\n    infinite\n  } = this._closure;\n  if (ctx.validStart) {\n    ctx.validStart = false;\n    cancelAnimation(translation);\n  }\n  touching.value = true;\n  const {\n    translationX: translationX,\n    translationY: translationY\n  } = e;\n  const panTranslation = isHorizontal.value ? translationX : translationY;\n  if (!infinite) {\n    if (translation.value > 0 || translation.value < -ctx.max) {\n      const boundary = translation.value > 0 ? 0 : -ctx.max;\n      const fixed = boundary - ctx.panOffset;\n      const dynamic = panTranslation - fixed;\n      translation.value = boundary + dynamic * 0.5;\n      return;\n    }\n  }\n  const translationValue = ctx.panOffset + panTranslation;\n  translation.value = translationValue;\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"e\",\"ctx\",\"cancelAnimation\",\"translation\",\"touching\",\"isHorizontal\",\"infinite\",\"_closure\",\"validStart\",\"value\",\"translationX\",\"translationY\",\"panTranslation\",\"max\",\"boundary\",\"fixed\",\"panOffset\",\"dynamic\",\"translationValue\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAmQgB,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,eAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC,YAAA;IAAAC;EAAA,SAAAC,QAAA;EACpB,IAAIN,GAAG,CAACO,UAAU,EAAE;IAClBP,GAAG,CAACO,UAAU,GAAG,KAAK;IACtBN,eAAe,CAACC,WAAW,CAAC;EAC9B;EACAC,QAAQ,CAACK,KAAK,GAAG,IAAI;EACrB,MAAM;IAAEC,YAAY,EAAZA,YAAY;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGX,CAAC;EACxC,MAAMY,cAAc,GAAGP,YAAY,CAACI,KAAK,GACrCC,YAAY,GACZC,YAAY;EAChB,IAAI,CAACL,QAAQ,EAAE;IACb,IAAKH,WAAW,CAACM,KAAK,GAAG,CAAC,IAAIN,WAAW,CAACM,KAAK,GAAG,CAACR,GAAG,CAACY,GAAG,EAAG;MAC3D,MAAMC,QAAQ,GAAGX,WAAW,CAACM,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAACR,GAAG,CAACY,GAAG;MACrD,MAAME,KAAK,GAAGD,QAAQ,GAAGb,GAAG,CAACe,SAAS;MACtC,MAAMC,OAAO,GAAGL,cAAc,GAAGG,KAAK;MACtCZ,WAAW,CAACM,KAAK,GAAGK,QAAQ,GAAGG,OAAO,GAAG,GAAG;MAC5C;IACF;EACF;EAEA,MAAMC,gBAAgB,GAAGjB,GAAG,CAACe,SAAS,GAAGJ,cAAc;EACvDT,WAAW,CAACM,KAAK,GAAGS,gBAAgB;AACtC\"}"};var _worklet_8822755952660_init_data={code:"function anonymous(e) {\n  const {\n    scrollEndVelocity,\n    isHorizontal,\n    scrollEndTranslation,\n    endWithSpring,\n    onScrollEnd,\n    infinite,\n    touching\n  } = this._closure;\n  const {\n    velocityX: velocityX,\n    velocityY: velocityY,\n    translationX: translationX,\n    translationY: translationY\n  } = e;\n  scrollEndVelocity.value = isHorizontal.value ? velocityX : velocityY;\n  scrollEndTranslation.value = isHorizontal.value ? translationX : translationY;\n  endWithSpring(onScrollEnd);\n  if (!infinite) touching.value = false;\n}",location:"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"e\",\"scrollEndVelocity\",\"isHorizontal\",\"scrollEndTranslation\",\"endWithSpring\",\"onScrollEnd\",\"infinite\",\"touching\",\"_closure\",\"velocityX\",\"velocityY\",\"translationX\",\"translationY\",\"value\"],\"sources\":[\"/Users/maximmatsuk/Documents/Projects/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA0Rc,SAACA,SAAKA,CAAAC,CAAA;EAAA;IAAAC,iBAAA;IAAAC,YAAA;IAAAC,oBAAA;IAAAC,aAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EACZ,MAAM;IAAEC,SAAS,EAATA,SAAS;IAAEC,SAAS,EAATA,SAAS;IAAEC,YAAY,EAAZA,YAAY;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGZ,CAAC;EAC9DC,iBAAiB,CAACY,KAAK,GAAGX,YAAY,CAACW,KAAK,GACxCJ,SAAS,GACTC,SAAS;EACbP,oBAAoB,CAACU,KAAK,GAAGX,YAAY,CAACW,KAAK,GAC3CF,YAAY,GACZC,YAAY;EAEhBR,aAAa,CAACC,WAAW,CAAC;EAE1B,IAAI,CAACC,QAAQ,EACXC,QAAQ,CAACM,KAAK,GAAG,KAAK;AAC1B\"}"};var IScrollViewGesture=function IScrollViewGesture(props){var _React$useContext=_react.default.useContext(_store.CTX),_React$useContext$pro=_React$useContext.props,vertical=_React$useContext$pro.vertical,pagingEnabled=_React$useContext$pro.pagingEnabled,snapEnabled=_React$useContext$pro.snapEnabled,panGestureHandlerProps=_React$useContext$pro.panGestureHandlerProps,infinite=_React$useContext$pro.loop,scrollAnimationDuration=_React$useContext$pro.scrollAnimationDuration,withAnimation=_React$useContext$pro.withAnimation,enabled=_React$useContext$pro.enabled,dataLength=_React$useContext$pro.dataLength,overscrollEnabled=_React$useContext$pro.overscrollEnabled,_React$useContext$pro2=_React$useContext$pro.marginOffset,marginOffset=_React$useContext$pro2===void 0?0:_React$useContext$pro2;var size=props.size,translation=props.translation,testID=props.testID,_props$style=props.style,style=_props$style===void 0?{}:_props$style,onScrollBegin=props.onScrollBegin,onScrollEnd=props.onScrollEnd,onTouchBegin=props.onTouchBegin,onTouchEnd=props.onTouchEnd;var maxPage=dataLength;var isHorizontal=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return!vertical;};_f._closure={vertical:vertical};_f.__initData=_worklet_10100718122216_init_data;_f.__workletHash=10100718122216;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[vertical]);var touching=(0,_reactNativeReanimated.useSharedValue)(false);var scrollEndTranslation=(0,_reactNativeReanimated.useSharedValue)(0);var scrollEndVelocity=(0,_reactNativeReanimated.useSharedValue)(0);var containerRef=(0,_reactNativeReanimated.useAnimatedRef)();var getLimit=_react.default.useCallback(function(){var _e=[new global.Error(),-8,-27];var _f=function _f(){if(!infinite&&!overscrollEnabled){var _measure=(0,_reactNativeReanimated.measure)(containerRef),_measure$width=_measure.width,containerWidth=_measure$width===void 0?0:_measure$width;if(dataLength*size<containerWidth)return 0;return dataLength*size-containerWidth+marginOffset;}return dataLength*size;};_f._closure={infinite:infinite,overscrollEnabled:overscrollEnabled,measure:_reactNativeReanimated.measure,containerRef:containerRef,dataLength:dataLength,size:size,marginOffset:marginOffset};_f.__initData=_worklet_11702000154001_init_data;_f.__workletHash=11702000154001;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[infinite,size,dataLength,overscrollEnabled]);var withSpring=_react.default.useCallback(function(){var _e=[new global.Error(),-6,-27];var _f=function _f(toValue,onFinished){var defaultWithAnimation={type:"timing",config:{duration:scrollAnimationDuration+100,easing:_constants.Easing.easeOutQuart}};return(0,_dealWithAnimation.dealWithAnimation)(withAnimation!=null?withAnimation:defaultWithAnimation)(toValue,function(){var _e=[new global.Error(),-3,-27];var _f=function _f(isFinished){if(isFinished)onFinished&&(0,_reactNativeReanimated.runOnJS)(onFinished)();};_f._closure={onFinished:onFinished,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_15664499378840_init_data;_f.__workletHash=15664499378840;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}());};_f._closure={scrollAnimationDuration:scrollAnimationDuration,Easing:_constants.Easing,dealWithAnimation:_dealWithAnimation.dealWithAnimation,withAnimation:withAnimation,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_38454346678_init_data;_f.__workletHash=38454346678;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[scrollAnimationDuration,withAnimation]);var endWithSpring=_react.default.useCallback(function(){var _e=[new global.Error(),-13,-27];var _f=function _f(onFinished){var origin=translation.value;var velocity=scrollEndVelocity.value;var finalTranslation=(0,_reactNativeReanimated.withDecay)({velocity:velocity,deceleration:0.999});if(pagingEnabled){var offset=-(scrollEndTranslation.value>=0?1:-1);var computed=offset<0?Math.ceil:Math.floor;var page=computed(-translation.value/size);if(infinite){var finalPage=page+offset;finalTranslation=withSpring(withProcessTranslation(-finalPage*size),onFinished);}else{var _finalPage=Math.min(maxPage-1,Math.max(0,page+offset));finalTranslation=withSpring(withProcessTranslation(-_finalPage*size),onFinished);}}if(!pagingEnabled&&snapEnabled){var nextPage=Math.round((origin+velocity*0.4)/size)*size;finalTranslation=withSpring(withProcessTranslation(nextPage),onFinished);}translation.value=finalTranslation;function withProcessTranslation(translation){if(!infinite&&!overscrollEnabled){var limit=getLimit();var sign=Math.sign(translation);return sign*Math.max(0,Math.min(limit,Math.abs(translation)));}return translation;}};_f._closure={translation:translation,scrollEndVelocity:scrollEndVelocity,withDecay:_reactNativeReanimated.withDecay,pagingEnabled:pagingEnabled,scrollEndTranslation:scrollEndTranslation,size:size,infinite:infinite,withSpring:withSpring,maxPage:maxPage,snapEnabled:snapEnabled,overscrollEnabled:overscrollEnabled,getLimit:getLimit};_f.__initData=_worklet_10010809513317_init_data;_f.__workletHash=10010809513317;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[translation,scrollEndVelocity.value,pagingEnabled,size,scrollEndTranslation.value,infinite,withSpring,snapEnabled,maxPage]);var onFinish=_react.default.useCallback(function(){var _e=[new global.Error(),-4,-27];var _f=function _f(isFinished){if(isFinished){touching.value=false;onScrollEnd&&(0,_reactNativeReanimated.runOnJS)(onScrollEnd)();}};_f._closure={touching:touching,onScrollEnd:onScrollEnd,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_14734469187996_init_data;_f.__workletHash=14734469187996;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[onScrollEnd,touching]);var activeDecay=_react.default.useCallback(function(){var _e=[new global.Error(),-6,-27];var _f=function _f(){touching.value=true;translation.value=(0,_reactNativeReanimated.withDecay)({velocity:scrollEndVelocity.value},function(){var _e=[new global.Error(),-2,-27];var _f=function _f(isFinished){return onFinish(isFinished);};_f._closure={onFinish:onFinish};_f.__initData=_worklet_11301139675464_init_data;_f.__workletHash=11301139675464;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}());};_f._closure={touching:touching,translation:translation,withDecay:_reactNativeReanimated.withDecay,scrollEndVelocity:scrollEndVelocity,onFinish:onFinish};_f.__initData=_worklet_14660770182194_init_data;_f.__workletHash=14660770182194;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[onFinish,scrollEndVelocity.value,touching,translation]);var resetBoundary=_react.default.useCallback(function(){var _e=[new global.Error(),-9,-27];var _f=function _f(){if(touching.value)return;if(translation.value>0){if(scrollEndTranslation.value<0){activeDecay();return;}if(!infinite){translation.value=withSpring(0);return;}}if(translation.value<-((maxPage-1)*size)){if(scrollEndTranslation.value>0){activeDecay();return;}if(!infinite)translation.value=withSpring(-((maxPage-1)*size));}};_f._closure={touching:touching,translation:translation,scrollEndTranslation:scrollEndTranslation,activeDecay:activeDecay,infinite:infinite,withSpring:withSpring,maxPage:maxPage,size:size};_f.__initData=_worklet_5253258937186_init_data;_f.__workletHash=5253258937186;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[touching.value,translation,maxPage,size,scrollEndTranslation.value,infinite,activeDecay,withSpring]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return translation.value;};_f._closure={translation:translation};_f.__initData=_worklet_15931544841004_init_data;_f.__workletHash=15931544841004;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),function(){var _e=[new global.Error(),-3,-27];var _f=function _f(){if(!pagingEnabled)resetBoundary();};_f._closure={pagingEnabled:pagingEnabled,resetBoundary:resetBoundary};_f.__initData=_worklet_12444593625099_init_data;_f.__workletHash=12444593625099;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),[pagingEnabled,resetBoundary]);var panGestureEventHandler=(0,_reactNativeReanimated.useAnimatedGestureHandler)({onStart:function(){var _e=[new global.Error(),-10,-27];var _f=function _f(_,ctx){touching.value=true;ctx.validStart=true;onScrollBegin&&(0,_reactNativeReanimated.runOnJS)(onScrollBegin)();ctx.max=(maxPage-1)*size;if(!infinite&&!overscrollEnabled)ctx.max=getLimit();ctx.panOffset=translation.value;};_f._closure={touching:touching,onScrollBegin:onScrollBegin,runOnJS:_reactNativeReanimated.runOnJS,maxPage:maxPage,size:size,infinite:infinite,overscrollEnabled:overscrollEnabled,getLimit:getLimit,translation:translation};_f.__initData=_worklet_6283859030724_init_data;_f.__workletHash=6283859030724;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),onActive:function(){var _e=[new global.Error(),-6,-27];var _f=function _f(e,ctx){if(ctx.validStart){ctx.validStart=false;(0,_reactNativeReanimated.cancelAnimation)(translation);}touching.value=true;var translationX=e.translationX,translationY=e.translationY;var panTranslation=isHorizontal.value?translationX:translationY;if(!infinite){if(translation.value>0||translation.value<-ctx.max){var boundary=translation.value>0?0:-ctx.max;var fixed=boundary-ctx.panOffset;var dynamic=panTranslation-fixed;translation.value=boundary+dynamic*0.5;return;}}var translationValue=ctx.panOffset+panTranslation;translation.value=translationValue;};_f._closure={cancelAnimation:_reactNativeReanimated.cancelAnimation,translation:translation,touching:touching,isHorizontal:isHorizontal,infinite:infinite};_f.__initData=_worklet_7554112990742_init_data;_f.__workletHash=7554112990742;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}(),onEnd:function(){var _e=[new global.Error(),-8,-27];var _f=function _f(e){var velocityX=e.velocityX,velocityY=e.velocityY,translationX=e.translationX,translationY=e.translationY;scrollEndVelocity.value=isHorizontal.value?velocityX:velocityY;scrollEndTranslation.value=isHorizontal.value?translationX:translationY;endWithSpring(onScrollEnd);if(!infinite)touching.value=false;};_f._closure={scrollEndVelocity:scrollEndVelocity,isHorizontal:isHorizontal,scrollEndTranslation:scrollEndTranslation,endWithSpring:endWithSpring,onScrollEnd:onScrollEnd,infinite:infinite,touching:touching};_f.__initData=_worklet_8822755952660_init_data;_f.__workletHash=8822755952660;_f.__stackDetails=_e;_f.__version="3.1.0";return _f;}()},[pagingEnabled,isHorizontal.value,infinite,maxPage,size,snapEnabled,onScrollBegin,onScrollEnd]);return _react.default.createElement(_reactNativeGestureHandler.PanGestureHandler,(0,_extends2.default)({},panGestureHandlerProps,{enabled:enabled,onGestureEvent:panGestureEventHandler,__self:_this,__source:{fileName:_jsxFileName,lineNumber:311,columnNumber:5}}),_react.default.createElement(_reactNativeReanimated.default.View,{ref:containerRef,testID:testID,style:style,onTouchStart:onTouchBegin,onTouchEnd:onTouchEnd,__self:_this,__source:{fileName:_jsxFileName,lineNumber:316,columnNumber:7}},props.children));};var ScrollViewGesture=IScrollViewGesture;exports.ScrollViewGesture=ScrollViewGesture;
//# sourceMappingURL=ScrollViewGesture.js.map