{"version":3,"names":["_react","_interopRequireDefault","require","_reactNativeReanimated","_computeNewIndexWhenDataChanges","_handlerOffsetDirection","_worklet_10652703225927_init_data","code","location","sourceMap","_worklet_17314307749108_init_data","useCommonVariables","props","vertical","height","width","dataLength","defaultIndex","defaultScrollOffsetValue","loop","size","validLength","defaultHandlerOffsetValue","Math","abs","_handlerOffset","useSharedValue","handlerOffset","prevDataLength","React","useEffect","value","useAnimatedReaction","_e","global","Error","_f","previousLength","currentLength","isLengthChanged","shouldComputed","_closure","__initData","__workletHash","__stackDetails","__version","_ref","direction","handlerOffsetDirection","computeNewIndexWhenDataChanges"],"sources":["useCommonVariables.ts"],"sourcesContent":["import React from \"react\";\nimport type Animated from \"react-native-reanimated\";\nimport { useSharedValue, useAnimatedReaction } from \"react-native-reanimated\";\n\nimport { computeNewIndexWhenDataChanges } from \"./computeNewIndexWhenDataChanges\";\nimport type { TInitializeCarouselProps } from \"./useInitProps\";\n\nimport { handlerOffsetDirection } from \"../utils/handlerOffsetDirection\";\n\ninterface ICommonVariables {\n  size: number\n  validLength: number\n  handlerOffset: Animated.SharedValue<number>\n}\n\nexport function useCommonVariables(\n  props: TInitializeCarouselProps<any>,\n): ICommonVariables {\n  const {\n    vertical,\n    height,\n    width,\n    dataLength,\n    defaultIndex,\n    defaultScrollOffsetValue,\n    loop,\n  } = props;\n  const size = vertical ? height : width;\n  const validLength = dataLength - 1;\n  const defaultHandlerOffsetValue = -Math.abs(defaultIndex * size);\n  const _handlerOffset = useSharedValue<number>(defaultHandlerOffsetValue);\n  const handlerOffset = defaultScrollOffsetValue ?? _handlerOffset;\n  const prevDataLength = useSharedValue(dataLength);\n\n  React.useEffect(() => {\n    handlerOffset.value = defaultHandlerOffsetValue;\n  }, [vertical, handlerOffset, defaultHandlerOffsetValue]);\n\n  useAnimatedReaction(() => {\n    const previousLength = prevDataLength.value;\n    const currentLength = dataLength;\n    const isLengthChanged = previousLength !== currentLength;\n    const shouldComputed = isLengthChanged && loop;\n\n    if (shouldComputed)\n      prevDataLength.value = dataLength;\n\n    return {\n      shouldComputed,\n      previousLength,\n      currentLength,\n    };\n  }, ({ shouldComputed, previousLength, currentLength }) => {\n    if (shouldComputed) {\n      // direction -> 1 | -1\n      const direction = handlerOffsetDirection(handlerOffset);\n\n      handlerOffset.value = computeNewIndexWhenDataChanges({\n        direction,\n        previousLength,\n        currentLength,\n        size,\n        handlerOffset: handlerOffset.value,\n      });\n    }\n  }, [dataLength, loop]);\n\n  return {\n    size,\n    validLength,\n    handlerOffset,\n  };\n}\n"],"mappings":"0LAAA,IAAAA,MAAA,CAAAC,sBAAA,CAAAC,OAAA,WAEA,IAAAC,sBAAA,CAAAD,OAAA,4BAEA,IAAAE,+BAAA,CAAAF,OAAA,qCAGA,IAAAG,uBAAA,CAAAH,OAAA,oCAAyE,IAAAI,iCAAA,EAAAC,IAAA,2eAAAC,QAAA,0GAAAC,SAAA,8qBAAAC,iCAAA,EAAAH,IAAA,+kBAAAC,QAAA,0GAAAC,SAAA,qwBAQlE,QAAS,CAAAE,kBAAkBA,CAChCC,KAAoC,CAClB,CAClB,GACE,CAAAC,QAAQ,CAOND,KAAK,CAPPC,QAAQ,CACRC,MAAM,CAMJF,KAAK,CANPE,MAAM,CACNC,KAAK,CAKHH,KAAK,CALPG,KAAK,CACLC,UAAU,CAIRJ,KAAK,CAJPI,UAAU,CACVC,YAAY,CAGVL,KAAK,CAHPK,YAAY,CACZC,wBAAwB,CAEtBN,KAAK,CAFPM,wBAAwB,CACxBC,IAAI,CACFP,KAAK,CADPO,IAAI,CAEN,GAAM,CAAAC,IAAI,CAAGP,QAAQ,CAAGC,MAAM,CAAGC,KAAK,CACtC,GAAM,CAAAM,WAAW,CAAGL,UAAU,CAAG,CAAC,CAClC,GAAM,CAAAM,yBAAyB,CAAG,CAACC,IAAI,CAACC,GAAG,CAACP,YAAY,CAAGG,IAAI,CAAC,CAChE,GAAM,CAAAK,cAAc,CAAG,GAAAC,qCAAc,EAASJ,yBAAyB,CAAC,CACxE,GAAM,CAAAK,aAAa,CAAGT,wBAAwB,OAAxBA,wBAAwB,CAAIO,cAAc,CAChE,GAAM,CAAAG,cAAc,CAAG,GAAAF,qCAAc,EAACV,UAAU,CAAC,CAEjDa,cAAK,CAACC,SAAS,CAAC,UAAM,CACpBH,aAAa,CAACI,KAAK,CAAGT,yBAAyB,CACjD,CAAC,CAAE,CAACT,QAAQ,CAAEc,aAAa,CAAEL,yBAAyB,CAAC,CAAC,CAExD,GAAAU,0CAAmB,iBAAAC,EAAA,MAAAC,MAAA,CAAAC,KAAA,eAAAC,EAAA,UAAAA,GAAA,CAAO,CACxB,GAAM,CAAAC,cAAc,CAAGT,cAAc,CAACG,KAAK,CAC3C,GAAM,CAAAO,aAAa,CAAGtB,UAAU,CAChC,GAAM,CAAAuB,eAAe,CAAGF,cAAc,GAAKC,aAAa,CACxD,GAAM,CAAAE,cAAc,CAAGD,eAAe,EAAIpB,IAAI,CAE9C,GAAIqB,cAAc,CAChBZ,cAAc,CAACG,KAAK,CAAGf,UAAU,CAEnC,MAAO,CACLwB,cAAc,CAAdA,cAAc,CACdH,cAAc,CAAdA,cAAc,CACdC,aAAa,CAAbA,aACF,CAAC,CACH,CAAC,CAAAF,EAAA,CAAAK,QAAA,EAAAb,cAAA,CA/CmBA,cAAc,CAAAZ,UAAA,CAASA,UAAU,CAAAG,IAAA,CADXA,IAAI,EAAAiB,EAAA,CAAAM,UAAA,CAAApC,iCAAA,CAAA8B,EAAA,CAAAO,aAAA,gBAAAP,EAAA,CAAAQ,cAAA,CAAAX,EAAA,CAAAG,EAAA,CAAAS,SAAA,gBAAAT,EAAA,oBAAAH,EAAA,MAAAC,MAAA,CAAAC,KAAA,eAAAC,EAAA,UAAAA,GAAAU,IAAA,CAgDY,IAApD,CAAAN,cAAc,CAAAM,IAAA,CAAdN,cAAc,CAAEH,cAAc,CAAAS,IAAA,CAAdT,cAAc,CAAEC,aAAa,CAAAQ,IAAA,CAAbR,aAAa,CACjD,GAAIE,cAAc,CAAE,CAElB,GAAM,CAAAO,SAAS,CAAG,GAAAC,8CAAsB,EAACrB,aAAa,CAAC,CAEvDA,aAAa,CAACI,KAAK,CAAG,GAAAkB,8DAA8B,EAAC,CACnDF,SAAS,CAATA,SAAS,CACTV,cAAc,CAAdA,cAAc,CACdC,aAAa,CAAbA,aAAa,CACblB,IAAI,CAAJA,IAAI,CACJO,aAAa,CAAEA,aAAa,CAACI,KAC/B,CAAC,CAAC,CACJ,CACF,CAAC,CAAAK,EAAA,CAAAK,QAAA,EAAAO,sBAAA,CA1DmBA,8CAAsB,CAAArB,aAAA,CAMvBA,aAAa,CAAAsB,8BAAA,CALRA,8DAA8B,CAAA7B,IAAA,CAIlDA,IAAI,EAAAgB,EAAA,CAAAM,UAAA,CAAAhC,iCAAA,CAAA0B,EAAA,CAAAO,aAAA,gBAAAP,EAAA,CAAAQ,cAAA,CAAAX,EAAA,CAAAG,EAAA,CAAAS,SAAA,gBAAAT,EAAA,KAqDL,CAACpB,UAAU,CAAEG,IAAI,CAAC,CAAC,CAEtB,MAAO,CACLC,IAAI,CAAJA,IAAI,CACJC,WAAW,CAAXA,WAAW,CACXM,aAAa,CAAbA,aACF,CAAC,CACH"}