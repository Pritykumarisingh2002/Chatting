{"version":3,"names":["_react","_interopRequireDefault","require","_reactNativeReanimated","_interopRequireWildcard","_useOffsetX","_LazyView","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_worklet_2396750619736_init_data","code","location","sourceMap","_worklet_11113070436332_init_data","_worklet_15128277149381_init_data","ParallaxLayout","props","handlerOffset","_props$parallaxScroll","parallaxScrollingOffset","_props$parallaxScroll2","parallaxScrollingScale","_props$parallaxAdjace","parallaxAdjacentItemScale","Math","pow","index","width","height","loop","dataLength","children","visibleRanges","vertical","_React$useState","React","useState","_React$useState2","_slicedToArray2","shouldUpdate","setShouldUpdate","size","x","useOffsetX","offsetXStyle","useAnimatedStyle","_e","global","Error","_f","value","translate","interpolate","Extrapolate","EXTEND","zIndex","CLAMP","scale","transform","translateY","translateX","_closure","__initData","__workletHash","__stackDetails","__version","updateView","useCallback","negativeRange","positiveRange","useAnimatedReaction","runOnJS","createElement","View","style","position","__self","__source","fileName","lineNumber","columnNumber","LazyView","exports"],"sources":["ParallaxLayout.tsx"],"sourcesContent":["import React from \"react\";\nimport Animated, {\n  Extrapolate,\n  interpolate,\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\n\nimport type { ILayoutConfig } from \"./parallax\";\n\nimport { useOffsetX } from \"../hooks/useOffsetX\";\nimport type { IVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { LazyView } from \"../LazyView\";\nimport type { IComputedDirectionTypes } from \"../types\";\n\nexport const ParallaxLayout: React.FC<\nIComputedDirectionTypes<\n{\n  loop?: boolean\n  handlerOffset: Animated.SharedValue<number>\n  index: number\n  dataLength: number\n  visibleRanges: IVisibleRanges\n} & ILayoutConfig\n>\n> = (props) => {\n  const {\n    handlerOffset,\n    parallaxScrollingOffset = 100,\n    parallaxScrollingScale = 0.8,\n    parallaxAdjacentItemScale = parallaxScrollingScale ** 2,\n    index,\n    width,\n    height,\n    loop,\n    dataLength,\n    children,\n    visibleRanges,\n    vertical,\n  } = props;\n\n  const [shouldUpdate, setShouldUpdate] = React.useState(false);\n\n  const size = props.vertical ? props.height : props.width;\n\n  const x = useOffsetX(\n    {\n      handlerOffset,\n      index,\n      size,\n      dataLength,\n      loop,\n    },\n    visibleRanges,\n  );\n\n  const offsetXStyle = useAnimatedStyle(() => {\n    const value = x.value / size;\n\n    const translate = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        -size + parallaxScrollingOffset,\n        0,\n        size - parallaxScrollingOffset,\n      ],\n      Extrapolate.EXTEND,\n    );\n\n    const zIndex = interpolate(\n      value,\n      [-1, 0, 1],\n      [0, size, 0],\n      Extrapolate.CLAMP,\n    );\n\n    const scale = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        parallaxAdjacentItemScale,\n        parallaxScrollingScale,\n        parallaxAdjacentItemScale,\n      ],\n      Extrapolate.CLAMP,\n    );\n\n    return {\n      transform: [\n        vertical\n          ? {\n            translateY: translate,\n          }\n          : {\n            translateX: translate,\n          },\n        {\n          scale,\n        },\n      ],\n      zIndex,\n    };\n  }, [loop, vertical, parallaxScrollingOffset]);\n\n  const updateView = React.useCallback(\n    (negativeRange: number[], positiveRange: number[]) => {\n      setShouldUpdate(\n        (index >= negativeRange[0] && index <= negativeRange[1])\n                    || (index >= positiveRange[0] && index <= positiveRange[1]),\n      );\n    },\n    [index],\n  );\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    () => {\n      runOnJS(updateView)(\n        visibleRanges.value.negativeRange,\n        visibleRanges.value.positiveRange,\n      );\n    },\n    [visibleRanges.value],\n  );\n\n  return (\n    <Animated.View\n      style={[\n        {\n          width: width || \"100%\",\n          height: height || \"100%\",\n          position: \"absolute\",\n        },\n        offsetXStyle,\n      ]}\n    >\n      <LazyView shouldUpdate={shouldUpdate}>{children}</LazyView>\n    </Animated.View>\n  );\n};\n"],"mappings":"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"}